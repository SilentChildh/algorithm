## 编译器与jvm

javac是编译器，编译器只是把一个个文件翻译成字节码的工具而已，文件之间有无关联不影响编译。
java是虚拟机，也是解释器。用于将类加载到内存中。在运行时，jvm再将内存中的字节码解释为机器语言交给计算机处理运算。



jvm需要根据字节码的内容关联各个文件。



## main方法解析

1. 被jvm所调用

2. 必须public

3. 必须static

4. 对于String[] args形参是：在执行java命令时，在后面多加的几个实参。

    （如在dos内执行命令：java Hello 实参1 实参2 实参3）

    （在idea中，可以在运行时，edit run/debug configuration 中的 pogram arguments， 即传入动态参数）





## 方法调用

《java核心技术 卷1》p155





## JIT即时编译

即时编译：

1. 当 JVM 的初始化完成后，类在调用执行过程中，执行引擎会把字节码转为机器码，然后在操作系统中才能执行。
2. 在字节码转换为机器码的过程中，虚拟机中还存在着一道编译，那就是`即时编译`。
3. 最初，JVM 中的字节码是由解释器（ Interpreter ）完成编译的，当虚拟机发现某个方法或代码块的运行特别频繁的时候，就会把这些代码认定为`热点代码`。
4. 为了提高热点代码的执行效率，在运行时，即时编译器（JIT，Just In Time）会把这些代码编译成与本地平台相关的机器码，并进行各层次的优化，然后保存到内存中。



回边计时器与热点代码：

1. 回边计数器用于统计一个方法中循环体代码执行的次数，在字节码中遇到控制流向后跳转的指令称为 "回边"（Back Edge）。
2. 建立回边计数器的主要目的是为了触发 OSR（On StackReplacement）编译，即栈上编译。
3. 在一些循环周期比较长的代码段中，当循环达到回边计数器阈值时，`JVM 会认为这段是热点代码`。
4. 那么JIT 编译器就会将这段代码编译成机器语言并缓存，在该循环时间段内，会直接转去执行缓存中的机器语言。